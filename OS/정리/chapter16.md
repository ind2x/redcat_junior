# 타이머 디바이스 드라이를 추가하자
## 디바이스의 특징과 쓰임

<br>

**타이머 디바이스**는 IRQ 0에 연결되어 있고 한번이나 일정 주기로 인터럽트를 발생시킨다.

타이머를 PIT(Programmable Interval Timer)라고도 부르며 컨트롤러 레지스터에 주기를 설정하여 발생 간격을 조절할 수 있다.

주로 시간 측정이나 시분할 멀티태스을 처리할 때 사용한다.

<br>

**타임 스탬프 카운터**는 프로세서 내부에 있으며 프로세서의 클록을 기준으로 카운터를 증가시켜 정밀한 시간을 측정할 수 있다.

<br>

**RTC(Real Time Clock)** 는 PC의 시계로서 실제 시간을 기록한다.

별도의 전원 장치가 있어서 전원이 꺼져도 시간을 기록할 수 있어서 PC를 킬 때 화면에 나오는 시간이 실제 시간과 큰 차이가 없는 것이 RTC 컨트롤러 덕분이다.

<br><br>
<hr style="border: 2px solid;">
<br><br>


## PIT 컨트롤러의 구조와 기능

<br>

![image](https://user-images.githubusercontent.com/52172169/200257583-2a0882b7-30b5-4a7f-92a7-e833fa10f09a.png)

<br>

카운터 레지스터의 크기는 2바이트, 컨트롤 레지스터의 크기는 1바이트이다.

I/O 포트는 PIT 컨트롤러와 1바이트 단위로 전송하므로 컨트롤 레지스터에 전달하는 커맨드에 따라 카운터 I/O 포트로 읽고 쓰는 바이트 수가 결정된다.

우리는 카운터 0만 사용할 것이며 모드는 0 또는 2를 사용한다.

<br>

![image](https://user-images.githubusercontent.com/52172169/200303877-f724542f-40de-40ba-b667-174d31fbc150.png)

<br>

이제 PIT를 초기화 해준다.

가장 중요한, 본연의 목적인 **시간**을 초기화 해줘야 하는데 이 부분은 책을 통해 설명을 듣는게 나을 것 같다.

그 다음은 **반복 여부**로, 단순히 일정 시간이 지났음을 확인하고자 한다면 모드 0을, 주기적으로 반복하는 것이 목적이면 모드 2로 설정해줘야 한다.

<br>



<br><br>
<hr style="border: 2px solid;">
<br><br>
