# 콘솔 셸을 만들자

<br>

**셸을 구현하는데 필요한 콘솔 라이브러리를 구현**하고, 콘솔 라이브러리를 구성하는 printf, sprintf 함수를 구현하는데 필요한 가변 인자 처리 방법을 살펴본다.

구현한 콘솔 라이브러리를 바탕으로 셸을 구현한다.

<br>

셸은 크게 3가지로 구성되는데 ```1) 키보드에서 키를 입력받아 커맨드 버퍼를 관리하고 커맨드 실행```, ```2) 텍스트 화면 관리로, 커서의 위치를 제어하고 화면에 데이터를 출력하는 기능```, ```3) 프로그램 실행```이다.

셸의 목적은 프로그램을 실행하는 것이며 셸을 통하지 않고 독립적으로 실행 가능하다.

셸은 거의 입출력 라이브러리가 더 큰 비중을 차지하므로 sprintf를 살펴본다. 

<br><br>
<hr style="border: 2px solid;">
<br><br>

## sprintf와 가변 인자 처리

<br>

C언어는 가변인자 처리를 위해 va_list 데이터 타입과 va_start, va_arg, va_end 라는 매크로를 사용한다.

이는 stdarg.h에 선언되어 있다.

<br>

![image](https://user-images.githubusercontent.com/52172169/199242529-08404098-dcc4-42c4-9486-6f484772780a.png)

<br>

확인해보면 가변 인재 매크로는 라이브러리를 사용하지 않아서 mint64 os에서 사용 가능하다고 한다.

<br>

이제 sprintf 함수를 보고 vsprintf 함수를 이용해 printf 함수를 구현해 줄 것이다.

sprintf 함수는 결과를 문자열 버퍼에 출력하고, printf 함수는 결과를 화면에 출력한다.

vsprintf 함수는 sprintf 함수의 실질적인 역할을 해주는 함수로 가변 인자 대신에 va_list 타입의 가변 인자 리스트를 받아서 처리한다.

<br>



<br><br>
<hr style="border: 2px solid;">
<br><br>
